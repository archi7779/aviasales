(this.webpackJsonpblock19=this.webpackJsonpblock19||[]).push([[0],{122:function(t,e,n){t.exports=n(207)},207:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(16),i=n.n(c),s=n(107),o=n(44),l=n(22);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(40),p=n(41),d=n(45),m=n(42),f=n(46),h=n(214),b=n(25),g=n.n(b),k=n(216),v=n(77),O=n.n(v),x=Object(k.a)("HANDLE_RADIO_BUTTON"),j=Object(k.a)("GET_TICKETS_IN_REQUEST"),E=Object(k.a)("GET_TICKETS_SUCCESS"),T=Object(k.a)("GET_TICKETS_FAILURE"),w=Object(k.a)("FILTER_TICKETS_IN_STATE"),y=Object(k.a)("SAVE_TICKETS_TO_STATE"),N=Object(k.a)("SORT_BUTTON_CLICKED"),S=n(31),I=n(32),C=n(212);function W(){var t=Object(S.a)(["\n  width: 60px;\n  height: 60px;\n  display: block;\n  margin: 0 auto;\n"]);return W=function(){return t},t}function B(){var t=Object(S.a)(["\n  width: 100%;\n  padding-bottom: 30px;\n  margin-top: 50px;\n"]);return B=function(){return t},t}function R(){var t=Object(S.a)(["\n    margin: 0 20px;\n    display:flex;\n    width: 500px;\n     @media (max-width: 505px) {\n         margin: 0;  \n         width:100%;\n     } \n    flex-direction: column;\n    justify-content: center;\n    .OutPut-button {\n        width:50%;\n        height: 50px;\n        margin-bottom: 20px;\n        margin-top: 20px;\n    }\n    .OutPut-loader {\n        display:flex;\n        justify-content: center;\n        align-content: center;\n        margin-top: -15px;\n        width: 500px;\n        @media (max-width: 505px) {\n            width: 100%;\n         }\n    } \n    .mainTicketWrapper {\n        padding-bottom: 20px;\n    }\n    .ticketWrapper {  \n        display: flex\n        flex-direction: row\n        flex-wrap: wrap\n     }\n    .greyText {  \n        color: #A0B0B9\n        width: 30%\n        display: block\n    }\n    .blackText { \n         color: #4A4A4A\n         width: 30%\n         display: block\n    }\n    .centred {  \n        text-align: center\n    }\n\n     \n"]);return R=function(){return t},t}function _(){var t=Object(S.a)(["\n  width: 500px;\n  @media (max-width: 505px) {\n    width: 100%;\n  }\n"]);return _=function(){return t},t}function A(){var t=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 232px;\n  background-color: #fff;\n  height: 252px;\n  margin-top: 20px;\n  .RadioBItem {\n    padding-top: 18px;\n    padding-left: 18px;\n  }\n"]);return A=function(){return t},t}function D(){var t=Object(S.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-content: center;\n  width: 100%;\n  padding: 0 20px;\n  background-color: #e5e5e5;\n"]);return D=function(){return t},t}var F=I.a.div(D()),L=I.a.div(A()),K=Object(I.a)(C.a)(_()),P=I.a.div(R()),U=I.a.div(B()),H=I.a.img(W()),G={handleRadio:x},q=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(d.a)(this,Object(m.a)(e).call(this,t))).state={},n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props,e=t.handleRadio,n=t.transFilter;return r.a.createElement(L,null,r.a.createElement("span",{className:"RadioBItem"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0432\u0442\u043e \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement(h.a,{value:"all",onClick:function(t){return e(t.target.value)},checked:n.all,className:"RadioBItem radio"},"\u0412\u0441\u0435"),r.a.createElement(h.a,{value:"0",onClick:function(t){return e(t.target.value)},checked:n[0],className:"RadioBItem radio"},"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement(h.a,{value:"1",onClick:function(t){return e(t.target.value)},checked:n[1],className:"RadioBItem radio"},"1 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"),r.a.createElement(h.a,{value:"2",onClick:function(t){return e(t.target.value)},checked:n[2],className:"RadioBItem radio"},"2 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"),r.a.createElement(h.a,{value:"3",onClick:function(t){return e(t.target.value)},checked:n[3],className:"RadioBItem radio"},"3 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"))}}]),e}(r.a.Component),J=Object(o.b)((function(t){return{transFilter:t.transplantationFilter}}),G)(q),z=function(){return r.a.createElement(U,null,r.a.createElement(H,{src:"./Logo.png",alt:"logo"}))},M=n(215),Q=n(210),V=n(211),$=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(d.a)(this,Object(m.a)(e).call(this,t))).getArravialDate=function(t,e){var n=Date.parse(t)+6e4*e,a=Object(V.a)(new Date(n),"HH"),r=Object(V.a)(new Date(n),"mm"),c=Object(V.a)(new Date(Date.parse(t)),"HH"),i=Object(V.a)(new Date(Date.parse(t)),"mm");return"".concat(c,":").concat(i," - ").concat(a,":").concat(r)},n.getTimeInSky=function(t){var e=t%60;return"".concat((t-e)/60,"\u0447 ").concat(e,"\u043c")},n.getTransactionsString=function(t){return 0===t.length?"\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a":1===t.length?"1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410":2===t.length?"2 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418":3===t.length?"3 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418":"mistake"},n.getTrasactionsABR=function(t){return t.length>0&&t.join(", ")},n.state={},n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props.ticketInfo,e=t.price,n=t.segments,a=t.carrier,c=e.toLocaleString("ru",{useGrouping:!0}),i="//pics.avs.io/99/36/".concat(a,".png"),s=n[0],o=n[1];return r.a.createElement("div",{className:"mainTicketWrapper"},r.a.createElement(K,{title:"".concat(c," \u0420"),extra:r.a.createElement("img",{alt:"s7Logo",src:i})},r.a.createElement("div",{className:"ticketWrapper"},r.a.createElement("span",{className:"greyText"},"".concat(s.origin,"-").concat(s.destination)),r.a.createElement("span",{className:"greyText centred"},"\u0412 \u041f\u0423\u0422\u0418"),r.a.createElement("span",{className:"greyText"},this.getTransactionsString(s.stops)),r.a.createElement("span",{className:"blackText"},this.getArravialDate(s.date,s.duration)),r.a.createElement("span",{className:"blackText centred"},this.getTimeInSky(s.duration)),r.a.createElement("span",{className:"blackText"},this.getTrasactionsABR(s.stops)),r.a.createElement("span",{className:"greyText"},"".concat(o.origin,"-").concat(o.destination)),r.a.createElement("span",{className:"greyText centred"},"\u0412 \u041f\u0423\u0422\u0418"),r.a.createElement("span",{className:"greyText"},this.getTransactionsString(o.stops)),r.a.createElement("span",{className:"blackText"},this.getArravialDate(o.date,o.duration)),r.a.createElement("span",{className:"blackText centred"},this.getTimeInSky(o.duration)),r.a.createElement("span",{className:"blackText"},this.getTrasactionsABR(o.stops)))))}}]),e}(r.a.Component),X={getTickets:function(){return function(t){var e,n,a;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t(j()),r.next=3,g.a.awrap(O.a.get("https://front-test.beta.aviasales.ru/search"));case 3:return e=r.sent,n=e.data.searchId,a=function e(){var a;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,g.a.awrap(O.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(n)));case 3:if(a=r.sent,t(y(a.data)),a.data.stop){r.next=10;break}return r.next=8,g.a.awrap(e());case 8:r.next=11;break;case 10:t(E());case 11:r.next=20;break;case 13:if(r.prev=13,r.t0=r.catch(0),404!==r.t0.response.status){r.next=18;break}return t(T()),r.abrupt("return");case 18:return r.next=20,g.a.awrap(e());case 20:case"end":return r.stop()}}),null,null,[[0,13]])},r.next=8,g.a.awrap(a());case 8:case"end":return r.stop()}}))}},handleSortBClick:N,filterTickets:w},Y=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(d.a)(this,Object(m.a)(e).call(this,t))).state={},n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.transFilter;(0,t.getTickets)(e,t.sortWith)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.transFilter,a=e.sortWith,r=e.tickets,c=e.filterTickets;n===t.transFilter&&a===t.sortWith&&r===t.tickets||c({transFilter:n,sortWith:a,tickets:r})}},{key:"render",value:function(){var t=this.props,e=t.ticketsStatus,n=t.filteredTickets,a=t.sortWith.sortWith,c=t.handleSortBClick;return r.a.createElement(P,null,r.a.createElement("div",null,r.a.createElement(M.a,{className:"OutPut-button",onClick:function(){c("price")},type:"price"===a?"primary":""},"\u0414\u0435\u0448\u0435\u0432\u044b\u0439"),r.a.createElement(M.a,{className:"OutPut-button",onClick:function(){c("speed")},type:"speed"===a?"primary":""},"\u0411\u044b\u0441\u0442\u0440\u044b\u0439")),"failure"===e&&r.a.createElement("div",null,"404 not found contact admin"),"requested"===e&&r.a.createElement("div",{className:"loaderWrapper"}," ",r.a.createElement(Q.a,{className:"OutPut-loader",size:"small"})," "),n.length>0&&n.slice(0,5).map((function(t){return r.a.createElement($,{ticketInfo:t,key:"".concat(t.price).concat(t.carrier).concat(t.segments[0].duration).concat(t.segments[1].duration),className:"OutPut-ticket"})})))}}]),e}(r.a.Component),Z=Object(o.b)((function(t){return{transFilter:t.transplantationFilter,ticketsStatus:t.ticketsStatus,tickets:t.tickets,sortWith:t.sortWith,filteredTickets:t.filteredTickets}}),X)(Y);var tt,et=function(){return r.a.createElement(F,null,r.a.createElement(z,null),r.a.createElement(J,null),r.a.createElement(Z,null))},nt=n(48),at=n(14),rt=n(115),ct=n(213),it=n(116),st=function(t,e){if("speed"===e){var n=t.sort((function(t,e){return t.segments[0].duration+t.segments[1].duration-(e.segments[0].duration+e.segments[0].duration)}));return Object(nt.a)(n)}var a=t.sort((function(t,e){return t.price-e.price}));return Object(nt.a)(a)},ot=Object(ct.a)(Object(at.a)({},x,(function(t,e){var n=e.payload;return Object(rt.a)({},t,Object(at.a)({},n,!t[n]))})),{all:!0,0:!1,1:!1,2:!1,3:!1}),lt=Object(ct.a)(Object(at.a)({},y,(function(t,e){var n=e.payload.tickets;return[].concat(Object(nt.a)(t),Object(nt.a)(n))})),[]),ut=Object(ct.a)(Object(at.a)({},N,(function(t,e){var n=e.payload;return t.sortWith===n?t:{sortWith:n}})),{sortWith:"price"}),pt=Object(ct.a)(Object(at.a)({},w,(function(t,e){var n=e.payload,a=n.transFilter,r=n.sortWith.sortWith,c=n.tickets,i=it.omitBy(a,(function(t){return!t})),s=Object.keys(i);return s.includes("all")||0===s.length?function(t,e){return st(t,e)}(c,r):function(t,e,n){var a=t.filter((function(t){var n=t.segments.map((function(t){var n=t.stops.length;return e.includes(n.toString())}));return!0===n[0]&&!0===n[1]}));return st(a,n)}(c,s,r)})),[]),dt=Object(ct.a)((tt={},Object(at.a)(tt,j,(function(){return"requested"})),Object(at.a)(tt,E,(function(){return"success"})),Object(at.a)(tt,T,(function(){return"failure"})),tt),"none"),mt=Object(l.c)({transplantationFilter:ot,ticketsStatus:dt,tickets:lt,filteredTickets:pt,sortWith:ut}),ft=(n(206),Object(l.e)(mt,Object(l.d)(Object(l.a)(s.a))));i.a.render(r.a.createElement(o.a,{store:ft},r.a.createElement(et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[122,1,2]]]);
//# sourceMappingURL=main.a922c4ef.chunk.js.map